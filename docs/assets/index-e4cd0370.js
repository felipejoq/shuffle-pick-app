(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();const h=document.getElementById("playersForm"),r=document.getElementById("playerList"),m=document.getElementById("getRandomPlayer"),f=document.getElementById("selectedPlayer"),p=document.getElementById("resetGame"),L=document.getElementById("deletePlayerList"),y=document.getElementById("detailsAddPlayers"),P=document.getElementById("playersCount"),c=document.getElementById("lastResult"),i=(t,e=[])=>{t.innerHTML="",e.length>0&&(y.open=!1);let n="<ol>";e.forEach(o=>{n+=`
                    <li class="${o.selected?"has-been-selected":""}" id="${o.id}">
                        <span>${o.name}</span>
                        <button class="btn-danger" type="button">
                            x
                        </button>
                    </li>
                `}),n+="</ol>",P.textContent=`(${e.length})`,t.innerHTML=n},I=(t,e)=>{const n=document.getElementById(t.id);let o;const l=e.map(s=>s.id===t.id?(s.selected=!0,s.lastResult=!0,o=s,s):(s.lastResult=!1,s));d(l),n.classList.add("highlighted"),f.style.display="block",c.style.display="block",f.innerHTML=`<i class="fa-solid fa-circle-check"></i> Resultado: <strong>${t.name}</strong>`,c.innerHTML=`<i class="fa-solid fa-circle-info"></i> Último resultado: ${o.name}`},E=()=>{const e=a().find(n=>n.lastResult===!0);e?(c.style.display="block",c.innerHTML=`<i class="fa-solid fa-circle-info"></i> Último resultado: ${e.name}`):c.style.display="none"},a=()=>JSON.parse(localStorage.getItem("players"))||[],d=t=>{localStorage.setItem("players",JSON.stringify(t))},v=t=>{const e=a(),n=e.findIndex(o=>o.id===t);e.splice(n,1),d(e),i(r,e)},b=t=>{let e=t.split(/\s*,|\n/);return e=e.filter(n=>n.trim()),e=e.map(n=>({id:T(),name:n,selected:!1,lastResult:!1})),e=[...a(),...e],d(e),e},R=t=>{const e=t.value;if(/<[^>]+>/.test(e))throw new Error("El contenido debe ser solo texto separado por comas o saltos de línea");return e},T=(t=6)=>Math.random().toString(36).substring(2,t+2),B=()=>{const t=a(),e=t.map(n=>(n.selected=!1,n.lastResult=!1,n));f.style.display="none",d(e),i(r,t)},w=()=>{d([]),y.open=!0,i(r,[])},g=2e3,M=t=>{let e;do e=t[Math.floor(Math.random()*t.length)];while(e.selected);return e},x=t=>t.find(e=>e.selected===!1),O=async()=>{const t=a();if(t.length<=0)return;if(i(r,t),!x(t)){alert("Todos los jugadores ya han participado al menos una vez.");return}const e=document.querySelectorAll("ol li");e.forEach(s=>{s.classList.remove("highlighted")});const n=Date.now()+g,o=setInterval(()=>{let s;do s=Math.floor(Math.random()*e.length);while(t[s].selected);e[s].classList.add("highlighted"),setTimeout(()=>{e[s].classList.remove("highlighted")},100),Date.now()>=n&&clearInterval(o)},200);await new Promise(s=>setTimeout(s,g+200));const l=M(t);I(l,t)},S=a();h.addEventListener("submit",t=>{t.preventDefault();for(const e of t.target.children)if(e.id==="players"){const n=R(e);b(n),e.value="",y.open=!1}i(r,a())});r.addEventListener("click",t=>{t.target.tagName==="BUTTON"&&v(t.target.closest("li").id)});m.addEventListener("click",async()=>{m.disabled=!0,await O(),m.disabled=!1});p.addEventListener("click",()=>{B()});L.addEventListener("click",()=>{w()});i(r,S);E();
